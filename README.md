# Нормальные формы


## 1-ая нормальна форма. Убираем составные значения.

Чтобы решить проблему составных значений, разделим их все на простые (атомарные). Для ученика разделим имя и фамилию на отдельные столбцы, аналогично поступим и с данными о курсе.

| **Фамилия** | **Имя**   | **Курс**               | **Номер потока** | **Дата начала** | **Количество уроков** | **Оценка** |
| ----------- | --------- | ---------------------- | ---------------- | --------------- | --------------------- | ---------- |
| Иванов      | Игорь     | Базы данных            | 54               | 12.11.2020      | 12                    | 4.9        |
| Павлова     | Анастасия | Базы данных            | 54               | 12.11.2020      | 12                    | 5          |
| Иванов      | Игорь     | Linux. Рабочая станция | 48               | 02.10.2020      | 8                     | 5          |
| Иванов      | Игорь     | Основы Python          | 45               | 18.08.2020      | 8                     | 4.9        |

Полученная структура удовлетворяет требованиям первой нормальной формы:

1. Все значения в таблице должны быть простыми.

2. Не должно быть повторения строк таблицы с одинаковыми данными - идентичными значениями.


## 2-ая нормальна форма. Упрощаем зависимости между значениями.

Следующий шаг - упрощение зависимостей в структуре таблицы. В нашем случае мы определили, что атрибуты «Фамилия ученика», «Имя ученика», «Курс», «Номер потока», «Дата начала обучения», «Оценка» относятся к ученику, а атрибут «Количество уроков» - к курсу.

Задача выполняется разбиением исходной таблицы на две новые, в каждой из которых все атрибуты относятся к (зависят от) одной сущности. В результате мы получим таблицу оценок и таблицу курсов.

| **Фамилия** | **Имя**   | **Курс**               | **Номер потока** | **Дата начала обучения** | **Оценка** |
| ----------- | --------- | ---------------------- | ---------------- | ------------------------ | ---------- |
| Иванов      | Игорь     | Базы данных            | 54               | 12.11.2020               | 4.9        |
| Павлова     | Анастасия | Базы данных            | 54               | 12.11.2020               | 5          |
| Иванов      | Игорь     | Linux. Рабочая станция | 48               | 02.10.2020               | 5          |
| Иванов      | Игорь     | Основы Python          | 45               | 18.08.2020               | 4.9        |

Таблица 7. Приведение ко второй нормальной форме, таблица оценок*

| **Курс**               | **Количество уроков** |
| ---------------------- | --------------------- |
| Базы данных            | 12                    |
| Linux. Рабочая станция | 8                     |
| Основы Python          | 8                     |


Полученная структура удовлетворяет требованиям второй нормальной формы:

1. Структура должна находиться в первой нормальной форме.
2. В каждой из таблиц все столбцы атрибутов должны относиться к (зависеть от) одной ключевой сущности.


## 3-я нормальна форма. Решаем проблему транзитивных связей и унифицируем ввод значений.

Для устранения транзитивных зависимостей вынесем атрибуты потоков в отдельную таблицу. А также вынесем все повторяющиеся атрибуты в отдельные таблицы. Затем свяжем эти таблицы по ключевым столбцам.

В результате получим структуру, состоящую из четырёх таблиц: «Курсы», «Потоки», «Ученики» и «Оценки». Обратим внимание, что в таблицах курсов, потоков и учеников добавился служебный ключевой столбец. Он используется, чтобы была возможность ссылаться на соответствующие значения в других таблицах. Ключ строки также рассматривается как некоторый условный номер, или, другими словами, идентификатор записи, уникальный в пределах таблицы. В таблице не указывается несколько записей с одинаковым ключевым значением.

| **Ключ курса** | **Название курса**     | **Количество уроков** |
| -------------- | ---------------------- | --------------------- |
| 1              | Базы данных            | 12                    |
| 2              | Linux. Рабочая станция | 8                     |
| 3              | Основы Python          | 8                     |

_Таблица 9. Приведение к третьей нормальной форме, таблица курсов_

| **Ключ потока** | **Номер потока** | **Ключ курса** | **Дата начала обучения** |
| --------------- | ---------------- | -------------- | ------------------------ |
| 1               | 45               | 2              | 18.08.2020               |
| 2               | 48               | 3              | 02.10.2020               |
| 3               | 54               | 1              | 12.11.2020               |

-

Таблица 10. Приведение к третьей нормальной форме, таблица потоков*

| **Ключ ученика** | **Фамилия** | **Имя**   |
| ---------------- | ----------- | --------- |
| 1                | Иванов      | Игорь     |
| 2                | Павлова     | Анастасия |

_Таблица 11. Приведение к третьей нормальной форме, таблица учеников_

| **Ключ ученика** | **Ключ потока** | **Оценка** |
| ---------------- | --------------- | ---------- |
| 1                | 1               | 4.9        |
| 2                | 1               | 5          |
| 1                | 3               | 5          |
| 1                | 2               | 4.9        |

_Таблица 12. Приведение к третьей нормальной форме, таблица оценок_

Такая структура соответствует требованиям третьей нормальной формы:

1. Структура таблиц должна соответствовать второй нормальной форме.
2. В таблицах должны отсутствовать транзитивные зависимости.
3. Все повторяющиеся неключевые атрибуты выносятся в отдельные таблицы.

На этом этапе работу по преобразованию данных мы выполнили, а структура соответствует требованиям реляционной модели.